(function(){var n;n=function(){function n(){this.searchFacets={hasIssues:["yes","no"],site:[],database:[]},this.siteCaches=["[filtered items]","[xsl]","[viewstate]","[registry]","[html]"],this.databaseCachesRegular=["[blobIDs]","[data]","[itempaths]","[items]","[paths]","[standardValues]"],this.databaseCachesProvider=["- Prefetch data","- Property data"]}return n.searchFacets=null,n.siteCaches=null,n.databaseCachesRegular=null,n.databaseCachesProvider=null,n.lastSearchHits=0,n.prototype.processCacheInfoUpdate=function(n){var r,i,y,t,s,h,u,f,e,o,p,w,b,c,l,a,v;for(i=n.get("CacheName"),y=n.get("CacheUtilization"),y>=75?n.set("hasIssues","yes"):n.get("CacheUtilizationDelta")<0?n.set("hasIssues","yes"):n.get("CacheUtilizationDelta")>5?n.set("hasIssues","yes"):n.set("hasIssues","no"),h=!1,c=this.siteCaches,f=0,p=c.length;f<p;f++)if(r=c[f],i.indexOf(r)!==-1){u=i.split("[")[0],n.set("site",u),this.searchFacets.site.indexOf(u)===-1&&this.searchFacets.site.push(u),h=!0;break}if(!h){for(s=!1,l=this.databaseCachesRegular,e=0,w=l.length;e<w;e++)if(r=l[e],i.indexOf(r)!==-1){t=i.split("[")[0],n.set("database",t),this.searchFacets.database.indexOf(t)===-1&&this.searchFacets.database.push(t),s=!0;break}if(!s){for(a=this.databaseCachesProvider,v=[],o=0,b=a.length;o<b;o++)if(r=a[o],i.indexOf(r)!==-1){t=i.split("(")[1].split(")")[0],n.set("database",t),this.searchFacets.database.indexOf(t)===-1&&this.searchFacets.database.push(t);break}else v.push(void 0);return v}}},n.prototype.getFacets=function(){return["hasIssues","site","database"]},n.prototype.getOptionsForFacet=function(n){return this.searchFacets[n]},n.prototype.applySearchCriteria=function(n,t){var r,i,o,s,l,u,f,e,a,v,h,c;if(this.lastSearchHits=0,i={hasIssues:[],site:[],database:[],empty:!1},s=visualSearch.searchQuery,s.models.length>0)for(h=s.models,f=0,a=h.length;f<a;f++){o=h[f],l=o.get("category"),u=o.get("value");switch(l){case"hasIssues":i.hasIssues.push(u);break;case"site":i.site.push(u);break;case"database":i.database.push(u)}}else i.empty=!0;for(c=n.models,e=0,v=c.length;e<v;e++)r=c[e],this.matchesSearchCriteria(r,i)?(r.set("matchesSearch",!0),this.lastSearchHits+=1):r.set("matchesSearch",!1);if(!(t!=null?t.silent:void 0))return n.trigger("search")},n.prototype.matchesSearchCriteria=function(n,t){var i,r,u;return t.empty?!0:t.hasIssues.length>0&&((i=n.get("hasIssues"),!i)||t.hasIssues.indexOf(i)===-1)?!1:t.site.length>0&&((u=n.get("site"),!u)||t.site.indexOf(u)===-1)?!1:t.database.length>0&&((r=n.get("database"),!r)||t.database.indexOf(r)===-1)?!1:!0},n}(),window.SearchManager=new n}).call(this)